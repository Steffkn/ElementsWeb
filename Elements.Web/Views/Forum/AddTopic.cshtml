@model AddTopicViewModel
@using Elements.Models.Forum
@using Elements.Common
@{
    ViewData["Title"] = "Add new topic";
}

<div class="row mt-2">
    <div class="col-lg-8 offset-lg-2">
        <div asp-validation-summary="All"></div>
        <form method="post" asp-controller="Forum" asp-action="AddTopic" enctype="multipart/form-data">
            <div class="form-group row">
                <div class="col">
                    <label asp-for="Title" class="col-form-label"></label>
                    <input asp-for="Title" class="form-control" />
                    <span asp-validation-for="Title" class=""></span>
                </div>
            </div>
            <div class="form-group row">
                <div class="col">
                    <label asp-for="Categories" class="col-form-label"></label>
                    <select asp-for="CategoryId" asp-items="@(new SelectList(Model.Categories,"Id","Name"))" class="custom-select">
                        <option selected="selected" value="">Select category</option>
                    </select>
                    <span asp-validation-for="CategoryId" class=""></span>
                </div>
            </div>

            @if (this.User.IsInRole(Constants.AdminRoleName) || this.User.IsInRole(Constants.ModeratorRoleName))
            {
                <div class="form-group row">
                    <div class="col">
                        <label asp-for="TopicType" class="col-form-label"></label>
                        <select asp-for="TopicType" asp-items="@(new SelectList(Model.TopicTypes,"Id","Name"))" class="custom-select">
                            <option selected="selected" value="">Select topic type</option>
                        </select>
                        <span asp-validation-for="TopicType" />
                    </div>
                </div>
            }

            <div class="form-group row">
                <div class="col">
                    <label asp-for="Content" class="col-form-label"></label>
                    <textarea asp-for="Content" class="form-control" rows="5"></textarea>
                    <span asp-validation-for="Content" class=""></span>
                </div>

            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/lib/tinymce/tinymce.min.js"></script>
    <script type="text/javascript">
        tinymce.init({
            selector: '#Content-notworking',
            height: 300,
            max_height: 500,
            min_height: 300,
            theme: 'modern',
            statusbar: false,
            menubar: false,
            // encoding: 'xml',
            plugins: 'code',

            toolbar: 'undo redo | styleselect fontsizeselect | bold italic | alignleft aligncenter alignright | bullist numlist | outdent indent code',
            fontsize_formats: '8pt 10pt 12pt 14pt 18pt 24pt 36pt',
            schema: 'html5',
            invalid_styles: {
                '*': 'color font-size', // Global invalid styles
                'a': 'background' // Link specific invalid styles
            },
            formats: {
                alignleft: { selector: 'p,h1,h2,h3,h4,h5,h6,div,ul,ol,li,img', classes: 'left' },
                aligncenter: { selector: 'p,h1,h2,h3,h4,h5,h6,div,ul,ol,li,img', classes: 'center' },
                alignright: { selector: 'p,h1,h2,h3,h4,h5,h6,div,ul,ol,li,img', classes: 'right' },
                alignjustify: { selector: 'p,h1,h2,h3,h4,h5,h6,div,ul,ol,li,img', classes: 'full' },
                bold: { inline: 'span', 'classes': 'bold' },
                italic: { inline: 'span', 'classes': 'italic' },
                underline: { inline: 'span', 'classes': 'underline', exact: true },
                strikethrough: { inline: 'del' },
                forecolor: { inline: 'span', classes: 'forecolor', styles: { color: '%value' } },
                hilitecolor: { inline: 'span', classes: 'hilitecolor', styles: { backgroundColor: '%value' } },
                custom_format: { block: 'h1', attributes: { title: 'Header' }, styles: { color: 'red' } }
            },
            // styleselect
            style_formats: [
                {
                    title: 'Headers', items: [
                        { title: 'Header 1', format: 'h1' },
                        { title: 'Header 2', format: 'h2' },
                        { title: 'Header 3', format: 'h3' },
                        { title: 'Header 4', format: 'h4' },
                        { title: 'Header 5', format: 'h5' },
                        { title: 'Header 6', format: 'h6' }
                    ]
                },
                {
                    title: 'Inline', items: [
                        { title: 'Bold', icon: 'bold', format: 'bold' },
                        { title: 'Italic', icon: 'italic', format: 'italic' },
                        { title: 'Underline', icon: 'underline', format: 'underline' },
                        { title: 'Strikethrough', icon: 'strikethrough', format: 'strikethrough' },
                        { title: 'Superscript', icon: 'superscript', format: 'superscript' },
                        { title: 'Subscript', icon: 'subscript', format: 'subscript' },
                        { title: 'Code', icon: 'code', format: 'code' }
                    ]
                },
                {
                    title: 'Blocks', items: [
                        { title: 'Paragraph', format: 'p' },
                        { title: 'Blockquote', format: 'blockquote' },
                        { title: 'Div', format: 'div' },
                        { title: 'Pre', format: 'pre' }
                    ]
                },
                {
                    title: 'Alignment', items: [
                        { title: 'Left', icon: 'alignleft', format: 'alignleft' },
                        { title: 'Center', icon: 'aligncenter', format: 'aligncenter' },
                        { title: 'Right', icon: 'alignright', format: 'alignright' },
                        { title: 'Justify', icon: 'alignjustify', format: 'alignjustify' }
                    ]
                },
                { title: 'Bold text', inline: 'b' },
                { title: 'Red text', inline: 'span', styles: { color: '#ff0000' } },
                { title: 'Red header', block: 'h1', styles: { color: '#ff0000' } },
                { title: 'Example 1', inline: 'span', classes: 'example1' },
                { title: 'Example 2', inline: 'span', classes: 'example2' },
                { title: 'Table styles' },
                { title: 'Table row 1', selector: 'tr', classes: 'tablerow1' }
            ],
            mobile: {
                plugins: ['autosave', 'lists', 'autolink'],
                toolbar: ['undo', 'bold', 'italic', 'styleselect']
            }
        });
    </script>
}

